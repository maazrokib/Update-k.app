<app-navbar></app-navbar>
<div class="dropdown">
  <!-- Dropdown Toggle Button -->
  <button class="btn btn-primary dropdown-toggle" type="button" (click)="toggleDropdown($event)">
    Select Category
  </button>

  <!-- Dropdown Menu -->
  <div *ngIf="isDropdownOpen" class="dropdown-menu">
    <!-- Add New Category Input -->
    <div class="dropdown-item add-category">
      <input
        type="text"
        [(ngModel)]="newCategoryName"
        placeholder="Add new category"
        (keyup.enter)="addCategory()"
        class="form-control"
      />
      <button class="btn btn-sm btn-success mt-2" (click)="addCategory()">Add</button>
    </div>

    <!-- Category List -->
    <div *ngFor="let category of categories" class="dropdown-item category-item">
      <span>{{ category.name }}</span>
      <div class="actions">
        <button class="btn btn-sm btn-warning me-2" (click)="openEditModal(category)">Edit</button>
        <button class="btn btn-sm btn-danger" (click)="deleteCategory(category.id!)">Delete</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div *ngIf="isEditModalOpen" class="modal-overlay">
  <div class="modal-content">
    <h3>Edit Category</h3>
    <input
      type="text"
      [(ngModel)]="currentCategory.name"
      placeholder="Enter category name"
      class="form-control mb-3"
    />
    <button class="btn btn-success me-2" (click)="saveEdit()">Save</button>
    <button class="btn btn-secondary" (click)="closeEditModal()">Cancel</button>
  </div>
</div>
